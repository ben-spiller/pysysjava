

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>PySys Java Plugins &mdash; PySys Java plugins v0.1  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> PySys Java plugins v0.1
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="_autodocgen/pysysjava.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="License.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="ChangeLog.html">Change Log</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/ben-spiller/pysysjava/tree/main/sample">Jump To GitHub Sample</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pysys-test.github.io/pysys-test">Jump To PySys Docs</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PySys Java plugins v0.1</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>PySys Java Plugins</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/ProjectOverview.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pysys-java-plugins">
<h1>PySys Java Plugins<a class="headerlink" href="#pysys-java-plugins" title="Permalink to this headline">¶</a></h1>
<p>This is a collection of plugins for the PySys System Test Framework that allow you to easily compile and run Java(R)
classes from your PySys tests, and a plugin that allows running JUnit tests as if they were PySys tests,
plus support for generating Java code coverage reports.</p>
<p>To use these plugins, you will need:</p>
<blockquote>
<div><ul class="simple">
<li><p>Python 3.6+</p></li>
<li><p>PySys 1.6.1+</p></li>
<li><p>Java 8+ (currently tested with Java 8 and Java 14)</p></li>
<li><p>Optionally: JUnit 5 (if you want to run JUnit tests); JUnit 4 is supported via the JUnit 5 vintage engine</p></li>
<li><p>Optionally: JaCoCo (if you want to generate coverage reports; currently tested with JaCoCo 0.8.6)</p></li>
</ul>
</div></blockquote>
<p>To install, just use the standard <code class="docutils literal notranslate"><span class="pre">pip3</span></code> executable (or <code class="docutils literal notranslate"><span class="pre">pip.exe</span></code> on Windows):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip3</span> <span class="n">install</span> <span class="n">PySys</span><span class="o">-</span><span class="n">Java</span>
</pre></div>
</div>
<div class="section" id="test-plugin-for-java">
<h2>Test Plugin for Java<a class="headerlink" href="#test-plugin-for-java" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="_autodocgen/pysysjava.javaplugin.html#module-pysysjava.javaplugin" title="pysysjava.javaplugin"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysysjava.javaplugin</span></code></a> for information about the PySys test (and runner) plugin.</p>
<p>Once configured in your PySys project, this plugin makes it easy to run Java classes and jars from your PySys
<code class="docutils literal notranslate"><span class="pre">run.py</span></code> tests, and also to compile small testing tools needed by individual test cases.</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myserver</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">java</span><span class="o">.</span><span class="n">startJava</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">appHome</span><span class="o">+</span><span class="s1">&#39;/my_server*.jar&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">getNextAvailableTCPPort</span><span class="p">()],</span>
        <span class="n">stdouterr</span><span class="o">=</span><span class="s1">&#39;my_server&#39;</span><span class="p">,</span> <span class="n">background</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="bp">self</span><span class="o">.</span><span class="n">java</span><span class="o">.</span><span class="n">defaultClasspath</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">appHome</span><span class="o">+</span><span class="s1">&#39;/mydeps.jar&#39;</span><span class="p">]</span>
<span class="bp">self</span><span class="o">.</span><span class="n">java</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="o">+</span><span class="s1">&#39;/javaclasses&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;--Werror&#39;</span><span class="p">])</span>
<span class="bp">self</span><span class="o">.</span><span class="n">java</span><span class="o">.</span><span class="n">startJava</span><span class="p">(</span><span class="s1">&#39;myorg.MyHttpTestClient&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="p">],</span> <span class="n">stdouterr</span><span class="o">=</span><span class="s1">&#39;httpclient&#39;</span><span class="p">,</span>
        <span class="n">classpath</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">java</span><span class="o">.</span><span class="n">defaultClasspath</span><span class="o">+</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="o">+</span><span class="s1">&#39;/javaclasses&#39;</span><span class="p">],</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="junit-execution-from-pysys">
<h2>JUnit Execution from PySys<a class="headerlink" href="#junit-execution-from-pysys" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="_autodocgen/pysysjava.junittest.html#module-pysysjava.junittest" title="pysysjava.junittest"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysysjava.junittest</span></code></a> for information about running JUnit tests from PySys.</p>
<p>You can either have a single PySys test for a whole directory tree of JUnit tests, or for larger projects and
increased control, use the JUnit descriptor loader that creates separate PySys tests (in-memory) for each JUnit test
class, allowing them to be executed individually (and in separate JVM processes):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pysys</span> <span class="n">run</span> <span class="o">--</span><span class="n">threads</span><span class="o">=</span><span class="mi">10</span> <span class="n">MyJUnitTests_org</span><span class="o">.</span><span class="n">myorg</span><span class="o">.</span><span class="n">TestSuiteFoo</span> <span class="n">MyJUnitTests_org</span><span class="o">.</span><span class="n">myorg</span><span class="o">.</span><span class="n">TestSuiteBar</span>
</pre></div>
</div>
<p>Classpath, JVM arguments, timeout and more can be customized on a per-test or per-directory basis using <code class="docutils literal notranslate"><span class="pre">&lt;user-data&gt;</span></code>
properties in the <code class="docutils literal notranslate"><span class="pre">pysystest.xml</span></code> or <code class="docutils literal notranslate"><span class="pre">pysysdirconfig.xml</span></code> file, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">pysysdirconfig</span><span class="o">&gt;</span>

        <span class="o">&lt;</span><span class="nb">id</span><span class="o">-</span><span class="n">prefix</span><span class="o">&gt;</span><span class="n">MyJUnitTests_</span><span class="o">&lt;/</span><span class="nb">id</span><span class="o">-</span><span class="n">prefix</span><span class="o">&gt;</span>

        <span class="o">&lt;</span><span class="n">data</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">user</span><span class="o">-</span><span class="n">data</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;junitTestDescriptorForEach&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;class&quot;</span><span class="o">/&gt;</span>

                <span class="o">&lt;</span><span class="n">user</span><span class="o">-</span><span class="n">data</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;junitStripPrefixes&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;myorg.mytest1, myorg&quot;</span><span class="o">/&gt;</span>

                <span class="o">&lt;</span><span class="n">user</span><span class="o">-</span><span class="n">data</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;javaClasspath&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;$</span><span class="si">{appHome}</span><span class="s2">/target/logging-jars/*.jar&quot;</span><span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">user</span><span class="o">-</span><span class="n">data</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;jvmArgs&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;-Xmx256M&quot;</span><span class="o">/&gt;</span>

                <span class="o">&lt;</span><span class="n">user</span><span class="o">-</span><span class="n">data</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;junitTimeoutSecs&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;600&quot;</span><span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">user</span><span class="o">-</span><span class="n">data</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;junitConfigArgs&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">/&gt;</span>
        <span class="o">&lt;/</span><span class="n">data</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">pysysdirconfig</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>There is also a simple parser for Ant-style JUnit XML reports (used to implement the above) in <a class="reference internal" href="_autodocgen/pysysjava.junitxml.html#module-pysysjava.junitxml" title="pysysjava.junitxml"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysysjava.junitxml</span></code></a>,
which could also be useful for getting data from other (non-JUnit) testing engines that use the same reporting file
format.</p>
</div>
<div class="section" id="java-code-coverage-reporting">
<h2>Java Code Coverage Reporting<a class="headerlink" href="#java-code-coverage-reporting" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="_autodocgen/pysysjava.coverage.html#module-pysysjava.coverage" title="pysysjava.coverage"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysysjava.coverage</span></code></a> for information about generating Java code coverage reports from any Java process
launched by PySys (including JUnit tests and integration tests).</p>
<p>The writer can merge together all the individual coverage files into a single combined one, and generate both an
XML report (suitable for uploading to an online coverage reporting service) and an HTML report (for human consumption).
For the reporting to run it is necessary to specify the classpath and if possible the directories under which the
source .java files can be found. An example configuration is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">writer</span> <span class="n">classname</span><span class="o">=</span><span class="s2">&quot;pysysjava.coverage.JavaCoverageWriter&quot;</span> <span class="n">alias</span><span class="o">=</span><span class="s2">&quot;javaCoverageWriter&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nb">property</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;jacocoDir&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;$</span><span class="si">{testRootDir}</span><span class="s2">/../jacoco&quot;</span><span class="o">/&gt;</span>

        <span class="o">&lt;</span><span class="nb">property</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;destDir&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;__coverage_java.$</span><span class="si">{outDirName}</span><span class="s2">&quot;</span><span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="nb">property</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;destArchive&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;JavaCoverage.zip&quot;</span><span class="o">/&gt;</span>

        <span class="o">&lt;</span><span class="nb">property</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;agentArgs&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;includes=myorg*&#39;</span><span class="o">/&gt;</span>

        <span class="o">&lt;</span><span class="nb">property</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;classpath&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;$</span><span class="si">{appHome}</span><span class="s2">/*.jar&quot;</span><span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="nb">property</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;sourceDirs&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;$</span><span class="si">{testRootDir}</span><span class="s2">/../src&quot;</span><span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="nb">property</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;reportArgs&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;--name &quot;My amazing report&quot;&#39;</span><span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="n">writer</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020 Ben Spiller; documentation last updated on 2020-09-24

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>